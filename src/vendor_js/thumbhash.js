function thumbHashToRGBA(e){let{PI:v,min:u,max:n,cos:j,round:p}=Math,a=e[0]|e[1]<<8|e[2]<<16,s=e[3]|e[4]<<8,T=(a&63)/63,y=(a>>6&63)/31.5-1,F=(a>>12&63)/31.5-1,M=(a>>18&31)/31,t=a>>23,S=(s>>3&63)/63,A=(s>>9&63)/63,g=s>>15,f=n(3,g?t?5:7:s&7),i=n(3,g?s&7:t?5:7),k=t?(e[5]&15)/15:1,w=(e[5]>>4)/15,_=t?6:5,b=0,r=(t,n,s)=>{let o=[];for(let i=0;i<n;i++)for(let a=i?0:1;a*n<t*(n-i);a++)o.push(((e[_+(b>>1)]>>((b++&1)<<2)&15)/7.5-1)*s);return o},O=r(f,i,M),x=r(3,3,S*1.25),C=r(3,3,A*1.25),E=t&&r(5,5,w),l=thumbHashToApproximateAspectRatio(e),m=p(l>1?32:32*l),h=p(l>1?32/l:32),o=new Uint8Array(m*h*4),d=[],c=[];for(let s=0,e=0;s<h;s++)for(let a=0;a<m;a++,e+=4){let r=T,p=y,l=F,g=k;for(let e=0,s=n(f,t?5:3);e<s;e++)d[e]=j(v/m*(a+.5)*e);for(let e=0,o=n(i,t?5:3);e<o;e++)c[e]=j(v/h*(s+.5)*e);for(let e=0,t=0;e<i;e++)for(let n=e?0:1,s=c[e]*2;n*i<f*(i-e);n++,t++)r+=O[t]*d[n]*s;for(let e=0,t=0;e<3;e++)for(let n=e?0:1,o=c[e]*2;n<3-e;n++,t++){let s=d[n]*o;p+=x[t]*s,l+=C[t]*s}if(t)for(let e=0,t=0;e<5;e++)for(let n=e?0:1,s=c[e]*2;n<5-e;n++,t++)g+=E[t]*d[n]*s;let b=r-2/3*p,_=(3*r-b+l)/2,w=_-l;o[e]=n(0,255*u(1,_)),o[e+1]=n(0,255*u(1,w)),o[e+2]=n(0,255*u(1,b)),o[e+3]=n(0,255*u(1,g))}return{w:m,h,rgba:o}}function thumbHashToAverageRGBA(e){let{min:n,max:s}=Math,t=e[0]|e[1]<<8|e[2]<<16,o=(t&63)/63,c=(t>>6&63)/31.5-1,i=(t>>12&63)/31.5-1,l=t>>23,d=l?(e[5]&15)/15:1,a=o-2/3*c,r=(3*o-a+i)/2,u=r-i;return{r:s(0,n(1,r)),g:s(0,n(1,u)),b:s(0,n(1,a)),a:d}}function thumbHashToApproximateAspectRatio(e){let t=e[3],n=e[2]&128,s=e[4]&128,o=s?n?5:7:t&7,i=s?t&7:n?5:7;return o/i}function rgbaToDataURL(e,t,n){let o=e*4+1,r=6+t*(5+o),s=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,e>>8,e&255,0,0,t>>8,t&255,8,6,0,0,0,0,0,0,0,r>>>24,r>>16&255,r>>8&255,r&255,73,68,65,84,120,1],c=[0,498536548,997073096,651767980,1994146192,1802195444,1303535960,1342533948,-306674912,-267414716,-690576408,-882789492,-1687895376,-2032938284,-1609899400,-1111625188],i=1,a=0;for(let e=0,r=0,c=o-1;e<t;e++,c+=o-1){s.push(e+1<t?0:1,o&255,o>>8,~o&255,o>>8^255,0);for(a=(a+i)%65521;r<c;r++){let e=n[r]&255;s.push(e),i=(i+e)%65521,a=(a+i)%65521}}s.push(a>>8,a&255,i>>8,i&255,0,0,0,0,0,0,0,0,73,69,78,68,174,66,96,130);for(let[n,t]of[[12,29],[37,41+r]]){let e=~0;for(let o=n;o<t;o++)e^=s[o],e=e>>>4^c[e&15],e=e>>>4^c[e&15];e=~e,s[t++]=e>>>24,s[t++]=e>>16&255,s[t++]=e>>8&255,s[t++]=e&255}return"data:image/png;base64,"+btoa(String.fromCharCode(...s))}function thumbHashToDataURL(e){let t=thumbHashToRGBA(e);return rgbaToDataURL(t.w,t.h,t.rgba)}